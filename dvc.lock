schema: '2.0'
stages:
  load_data:
    cmd: python -m src.nyc_tfp.load_data
    deps:
    - path: src/nyc_tfp/load_data.py
      hash: md5
      md5: 5011c4566a1eadcac8b9543a982ab386
      size: 2809
    params:
      params.yaml:
        paths.dataset_download_path: data/01_raw
        paths.raw_dataset_path: data/01_raw/train.csv
    outs:
    - path: data/01_raw/train.csv
      hash: md5
      md5: 75df8d0b86390d89bdd398c032b38653
      size: 5697178298
  preprocess:
    cmd: python -m src.nyc_tfp.preprocess
    deps:
    - path: data/01_raw/train.csv
      hash: md5
      md5: 75df8d0b86390d89bdd398c032b38653
      size: 5697178298
    - path: src/nyc_tfp/preprocess.py
      hash: md5
      md5: 7361bfb784e4372f692208c3115d6405
      size: 19176
    params:
      params.yaml:
        features:
          numeric:
          - pickup_longitude
          - pickup_latitude
          - dropoff_longitude
          - dropoff_latitude
          - trip_distance
          - passenger_count
          - pickup_datetime_year
          boolean:
          - pickup_datetime_is_weekend
          - pickup_datetime_is_late_night
          - pickup_datetime_is_night
          - pickup_datetime_is_early_morning
          - pickup_datetime_is_rush_hour
          cyclic: []
          categorical: []
        paths.preprocessed_dataset_path: data/02_preprocessed/preprocessed_df.csv
        paths.raw_dataset_path: data/01_raw/train.csv
    outs:
    - path: data/02_preprocessed/preprocessed_df.csv
      hash: md5
      md5: b809b9b0fe94866e056e0ba2913bbaa7
      size: 2108528834
  train:
    cmd: python -m src.nyc_tfp.train_model
    deps:
    - path: data/02_preprocessed/preprocessed_df.csv
      hash: md5
      md5: b809b9b0fe94866e056e0ba2913bbaa7
      size: 2108528834
    - path: params.yaml
      hash: md5
      md5: c063db21377cb54ea61d4a2cc0767be8
      size: 1317
    - path: src/nyc_tfp/train_model.py
      hash: md5
      md5: ad99543da1a1418953d6a0e4931626df
      size: 7073
    params:
      params.yaml:
        experiment.name: NYC_Taxi_Fare_Pred_Demo
        features:
          numeric:
          - pickup_longitude
          - pickup_latitude
          - dropoff_longitude
          - dropoff_latitude
          - trip_distance
          - passenger_count
          - pickup_datetime_year
          boolean:
          - pickup_datetime_is_weekend
          - pickup_datetime_is_late_night
          - pickup_datetime_is_night
          - pickup_datetime_is_early_morning
          - pickup_datetime_is_rush_hour
          cyclic: []
          categorical: []
        model:
          type: LinearRegression
          alpha: 0.01
        paths.final_dataset_path: data/03_final/final_df.csv
        paths.preprocessed_dataset_path: data/02_preprocessed/preprocessed_df.csv
        target_feature: fare_amount
        version: 0.1.0
    outs:
    - path: models/model.pkl
      hash: md5
      md5: c1f1c13a0b97ebd49f11e86c6522392b
      size: 1389
    - path: models/preprocessor.pkl
      hash: md5
      md5: d83c2a40046ad0fa7c3133b5f52519bf
      size: 3183
  evaluate:
    cmd: python -m src.nyc_tfp.evaluate_model
    deps:
    - path: data/train_test_split/X_test.csv
      hash: md5
      md5: 8ee972f17559ec394f4176fa6733e0d7
      size: 403486831
    - path: data/train_test_split/y_test.csv
      hash: md5
      md5: 4d44d52089637ab00e58205982626cb0
      size: 21681895
    - path: evaluation/run_id.txt
      hash: md5
      md5: 437582489f80ce57d91f72fcfe70ccc5
      size: 32
    - path: models/model.pkl
      hash: md5
      md5: c1f1c13a0b97ebd49f11e86c6522392b
      size: 1389
    - path: models/preprocessor.pkl
      hash: md5
      md5: d83c2a40046ad0fa7c3133b5f52519bf
      size: 3183
    - path: src/nyc_tfp/evaluate_model.py
      hash: md5
      md5: e7753d2cbc37157cfacbd18ba3d06580
      size: 2044
    outs:
    - path: evaluation/metrics.json
      hash: md5
      md5: 56dbfc9a1229b4ea279c9f039d56f52f
      size: 121
